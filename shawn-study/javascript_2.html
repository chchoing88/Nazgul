<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" type="text/css"
          href="http://html.gt.dev.daum.net/search-2015/mo/_style/css/m_common_dev.css">
    <script src="https://code.jquery.com/jquery-3.2.1.js"
            integrity="sha256-DZAnKJ/6XZ9si04Hgrsxu/8s717jcIzLy3oi35EouyE="
            crossorigin="anonymous"></script>
    <script src="flipsnap.js"></script>

    <style>
        ul {
            list-style: none;
        }

        .fold {
            display: none;
        }
    </style>
</head>
<body>

<div id="speColl">
    <div class="coll_tit">
        <h2 class="tit">카카오톡 이모티콘</h2>
    </div>
    <div class="coll_cont">
        <!--tab macro ------------------------------------------------------------------->
        <div class="tab_fix">
            <ul class="list_tab tab_size4">
                <li><a href="javascript:;" class="tab_tit" data-click-p="1">인기</a></li>
                <li><a href="javascript:;" class="tab_tit" data-click-p="1">신규</a></li>
                <li><a href="javascript:;" class="tab_tit" data-click-p="1">무료</a></li>
                <li><a href="javascript:;" class="tab_tit" data-click-p="1">카테고리</a></li>
            </ul>
        </div>
        <div class="tab_fix tab_sub">
            <ul class="list_tab tab_size3 _spe_tab_sub" style="display: none;">
                <li class="on"><a href="javascript:;" class="tab_tit" data-panel="5"><span class="inner_tit">탭메뉴1</span></a></li>
                <li><a href="javascript:;" class="tab_tit" data-click-p="2"><span class="inner_tit">탭메뉴2</span></a></li>
                <li><a href="javascript:;" class="tab_tit" data-click-p="2"><span class="inner_tit">탭메뉴3</span></a></li>
            </ul>
        </div>
        <!--tab macro ------------------------------------------------------------------->

        <div class="flipsnap_view"> <!-- flipsnap 용 div 클래스를 기입하고 사용 -->
            <div class="flipsnap"> <!-- flipsnap 용 div 클래스를 기입하고 사용 -->
                <!--content macro ------------------------------------------------------------------->
                <div class="flipsnap_item"><!-- flipsnap 용 div 클래스를 기입하고 사용 -->
                    <ul class="mg_cont list_emoticon list_comp">

                        <li class="">
                            <div class="desc_emoticon">
                                <a href="javascript:;" class="wrap_thumb" data-click-p="3">
                                    <img src="https://t1.search.daumcdn.net/thumb/C140x140h.q85/?fname=https://ssl.daumcdn.net/i1.search/cfile103/image/257BE24456B2A97829CF43"
                                         width="70" height="70" alt="" class="thumb_img">
                                </a>
                                <a href="javascript:;" class="wrap_cont" data-click-p="4">
                                    <strong class="tit_emoticon">
                                        <span class="txt_comm">헬로 라이언</span>
                                    </strong>
                                    <span class="txt_emoticon txt_comm">카카오프렌즈</span>
                                </a>
                            </div>
                        </li>
                        <li class="">
                            <div class="desc_emoticon">
                                <a href="javascript:;" class="wrap_thumb" data-click-p="3">
                                    <img src="https://t1.search.daumcdn.net/thumb/C140x140h.q85/?fname=https://ssl.daumcdn.net/i1.search/cfile103/image/257BE24456B2A97829CF43"
                                         width="70" height="70" alt="" class="thumb_img">
                                </a>
                                <a href="javascript:;" class="wrap_cont" data-click-p="4">
                                    <strong class="tit_emoticon">
                                        <span class="txt_comm">헬로 라이언</span>
                                    </strong>
                                    <span class="txt_emoticon txt_comm">카카오프렌즈</span>
                                </a>
                            </div>
                        </li>
                        <li class="">
                            <div class="desc_emoticon">
                                <a href="javascript:;" class="wrap_thumb" data-click-p="3">
                                    <img src="https://t1.search.daumcdn.net/thumb/C140x140h.q85/?fname=https://ssl.daumcdn.net/i1.search/cfile103/image/257BE24456B2A97829CF43"
                                         width="70" height="70" alt="" class="thumb_img">
                                </a>
                                <a href="javascript:;" class="wrap_cont" data-click-p="4">
                                    <strong class="tit_emoticon">
                                        <span class="txt_comm">헬로 라이언</span>
                                    </strong>
                                    <span class="txt_emoticon txt_comm">카카오프렌즈</span>
                                </a>
                            </div>
                        </li>
                        <li class="">
                            <div class="desc_emoticon">
                                <a href="javascript:;" class="wrap_thumb" data-click-p="3">
                                    <img src="https://t1.search.daumcdn.net/thumb/C140x140h.q85/?fname=https://ssl.daumcdn.net/i1.search/cfile103/image/257BE24456B2A97829CF43"
                                         width="70" height="70" alt="" class="thumb_img">
                                </a>
                                <a href="javascript:;" class="wrap_cont" data-click-p="4">
                                    <strong class="tit_emoticon">
                                        <span class="txt_comm">헬로 라이언</span>
                                    </strong>
                                    <span class="txt_emoticon txt_comm">카카오프렌즈</span>
                                </a>
                            </div>
                        </li>
                        <li class="">
                            <div class="desc_emoticon">
                                <a href="javascript:;" class="wrap_thumb" data-click-p="3">
                                    <img src="https://t1.search.daumcdn.net/thumb/C140x140h.q85/?fname=https://ssl.daumcdn.net/i1.search/cfile103/image/257BE24456B2A97829CF43"
                                         width="70" height="70" alt="" class="thumb_img">
                                </a>
                                <a href="javascript:;" class="wrap_cont" data-click-p="4">
                                    <strong class="tit_emoticon">
                                        <span class="txt_comm">헬로 라이언</span>
                                    </strong>
                                    <span class="txt_emoticon txt_comm">카카오프렌즈</span>
                                </a>
                            </div>
                        </li>
                        <li class="">
                            <div class="desc_emoticon">
                                <a href="javascript:;" class="wrap_thumb" data-click-p="3">
                                    <img src="https://t1.search.daumcdn.net/thumb/C140x140h.q85/?fname=https://ssl.daumcdn.net/i1.search/cfile103/image/257BE24456B2A97829CF43"
                                         width="70" height="70" alt="" class="thumb_img">
                                </a>
                                <a href="javascript:;" class="wrap_cont" data-click-p="4">
                                    <strong class="tit_emoticon">
                                        <span class="txt_comm">헬로 라이언</span>
                                    </strong>
                                    <span class="txt_emoticon txt_comm">카카오프렌즈</span>
                                </a>
                            </div>
                        </li>

                    </ul>
                    <div class="extend_comp extend_comp2">
                        <a href="#none" class="extender extend_more" data-click-e="1">
                            <span class="ico_extend">정보 더보기</span>
                        </a>
                        <br/>
                        <a href="#none" class="extender extend_out" data-click-e="2">
                            이모티콘 더보기 <span class="ico_rwd ico_arrow"></span>
                        </a>
                    </div>
                </div> <!-- flipsnap 용 div 클래스를 기입하고 사용 -->
                <!--content macro ------------------------------------------------------------------->
                <div class="flipsnap_item">신규</div> <!-- flipsnap 용 div 클래스를 기입하고 사용 -->
                <div class="flipsnap_item">무료</div> <!-- flipsnap 용 div 클래스를 기입하고 사용 -->
                <div class="flipsnap_item">카테고리</div> <!-- flipsnap 용 div 클래스를 기입하고 사용 -->
            </div><!-- flipsnap 용 div 클래스를 기입하고 사용 -->
        </div><!-- flipsnap 용 div 클래스를 기입하고 사용 -->

    </div>
</div>


<script type="text/javascript">
    'use strict';
    var C = C || {};
    /*
     * UI개발 : wonnie.cha, 2017.04.07
     * UX개발 : shawn.thecool, 2017.04.21
     * 기능 : 더보기,클릭로그, 유입경로, 재쿼리, 플립스넵(가로스크롤), 공유하기, 스크롤크기 고정
     * 히스토리 : #검색의 이모티콘을 통함검색(모바일)에서도 이용하기 원함
     * */
    !function ($, exports) {
        exports.EmoticonSearch = function (ctx) {
            var $ctx = $(ctx);

            var extendComp = function () {
                var extendMoreBtnList = $ctx.find('.extender.extend_more');
                var extendOutBtnList = $ctx.find('.extender.extend_out');

                var spreadMore = function (btn) {
                    var targetList = $(btn).parent().prev().children();
                    var toggleList = targetList.slice(5);
                    $(toggleList).toggleClass('fold');
                };
                var viewMore = function (btn) {
                    console.log('펼쳐보기 버튼', btn);
                };
                var addEvent = function () {
                    extendMoreBtnList.on('click', function () {
                        spreadMore(this);
                    });
                    extendOutBtnList.on('click', function () {
                        viewMore(this);
                    });
                };

                return {
                    init: function () {
                        addEvent();
                    }
                }
            };
            /*
             * display log : KES  ?
             * click log: dc=KES
             * P값
             * 구분(인기/신규/카테고리): 1
             * 카테고리(카테고리 탭에서 세부 카테고리 선택 버튼): 2
             * 썸네일 : 3
             * 텍스트 : 4
             * R값
             * 순차적용
             * E값
             * 펼쳐보기: 1
             * 더보기: 2
             * */
            var clickLog = function () {
                var $clickLogPList = $('[data-click-p]');
                var $clickLogEList = $('[data-click-e]');

                var setSmartLog = function (e, target) {
                    var logParamP = $(target).data('click-p');
                    var logParamE = $(target).data('click-e');
                    var logParamR = $(target).index() + 1;
                    var logParams = 's=TO&a=CONA&dc=KES&pg=1&rc=1';

                    if (logParamP != undefined) {
                        logParams = logParams + '&p=' + logParamP + '&r=' + logParamR;
                    }
                    if (logParamE != undefined) {
                        logParams = logParams + '&e=' + logParamE;
                    }
                    console.log('smartLog(target, "' + logParams + '", ' + e + ');');
                    console.log('target : ', target);
                };
                var addEvent = function () {
                    $clickLogPList.on('click', function (e) {
                        setSmartLog(e, this);
                    });
                    $clickLogEList.on('click', function (e) {
                        setSmartLog(e, this);
                    });
                };

                return {
                    init: function () {
                        addEvent();
                    }
                }
            };

            /*
             * ?referer=레퍼러
             * 카드뷰 : sharp_card
             * 말풍선 : shap_balloon
             * 채널탭 검색 : channel_search ?
             * 다음 모웹 검색 : daum_search
             * 다음모웹 daum_mw_search
             * 톡3탭 talk_3tab_search
             * */
            var inflowRoute = function (url, inflowRouteType) {
                var str = url + '?referer=' + inflowRouteType;
                return {
                    init: function () {
                        console.log(str)
                    }
                }
            }; // referer 정보 부족
            var reQueryLink = function () { // freemarker에서 달아주는게 맞으려나.. + inflowRoute가 붙어 들어가야 하는거 같은뎀..
                /*
                 * 재쿼리 발생 시 붙는 파라미터 : DA=KES
                 * */
                var addEvent = function () {

                };

                return {
                    init: function () {
                        addEvent();
                    }
                }
            };
            //----> 오늘 (화)
            var flipSnap = function () {
                var $tabs = $ctx.find('.list_tab').children(),
                    flipsnap = Flipsnap('' + ctx + ' .flipsnap');

                //초기 값이 신규이일경우 신규 탭부터 시작
                var setDefaultTab = function () {
                    $($tabs[1]).trigger('click');
                };

                var addEvent = function () {

                    /* 플리킹했을때 선택된 탭에 on 클래스를 추가한다.*/
                    flipsnap.element.addEventListener('fspointmove', function () {
                        $tabs.filter('.on').removeClass('on');
                        $tabs.eq(flipsnap.currentPoint).addClass('on');
                    }, false);

                    /*탭을 클릭하면 선택된 탭과 관련된 내용을 노출한다.*/
                    $tabs.each(function (idx, el) {
                        $(el).on('click', function (event) {
                            $tabs.filter('.on').removeClass('on');
                            $tabs.eq(idx).addClass('on');
                            flipsnap.moveToPoint(idx);
                        });
                    });
                };
                return {
                    init: function () {
                        addEvent();
                        setDefaultTab();
                    }
                }
            }; // 모듈 찾아보기 (수)
            var emoticonShare = function () {
                return {
                    init: function () {

                    }
                }
            }; //api 찾아보기 (목)
            var fixInnerScroll = function () {
                return {
                    init: function () {

                    }
                }
            }; // 금요일  ㄱ ㄱ

            return {
                init: function () {
                    console.log('C.speColl.EmoticonSearch : initialized!!');
                    extendComp().init();
                    clickLog().init();
                    inflowRoute('targetUrl', 'inflowRouteType').init();
                    reQueryLink().init();
                    flipSnap().init();
                    emoticonShare().init();
                    fixInnerScroll().init();
                }
            }
        }
    }(jQuery, (C = C || {}) && (C.speColl = C.speColl || {}));
    C.speColl.EmoticonSearch("#speColl").init();
</script>
</body>
</html>